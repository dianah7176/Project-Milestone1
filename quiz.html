<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Set correct character encoding and mobile viewport -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Page title shows in the browser tab -->
  <title>Quiz · HTTP/HTTPS</title>

  <!-- Reuse your site-wide styles for a consistent look -->
  <link rel="stylesheet" href="styles.css">

  <!-- Add small quiz-specific styles that build on styles.css -->
  <style>
    /* Style the quiz container as a card */
    .quiz-card{background:#f8fafc;border:1px solid #e5e7eb;border-radius:.75rem;padding:1rem}

    /* Group related inputs with fieldset and legend */
    fieldset{border:1px solid #e5e7eb;border-radius:.5rem;padding:1rem;margin:1rem 0}
    legend{padding:0 .4rem;font-weight:700}

    /* Space labels and options for easy reading */
    .q{display:grid;gap:.5rem;margin:.5rem 0}
    .options{display:grid;gap:.35rem;margin-top:.25rem}
    .hint{color:#6b7280;font-size:.92rem}

    /* Style action buttons for clear calls to action */
    .actions{display:flex;gap:.75rem;margin-top:1rem}
    button{cursor:pointer;border:1px solid #e5e7eb;border-radius:.6rem;padding:.6rem 1rem;background:#fff}
    .primary{background:#2563eb;border-color:#2563eb;color:#fff}
    .primary:hover{filter:brightness(.98)}
    .secondary:hover{outline:2px solid #2563eb;outline-offset:1px}

    /* Style the results area with clear color feedback */
    #results{margin-top:1.25rem;display:none}
    .scoreline{font-weight:800}
    .pass{color:#16a34a}
    .fail{color:#dc2626}
    .perq{border-top:1px dashed #e5e7eb;padding-top:.75rem;margin-top:.75rem}
    .ok{color:#16a34a;font-weight:700}
    .bad{color:#dc2626;font-weight:700}
  </style>
</head>
<body>
  <!-- Keep the same header and menu as your other pages -->
  <header class="site-header">
    <div class="container header-wrap">
      <!-- Brand links back to Home -->
      <a class="brand" href="index.html">HTTP Research</a>

      <!-- Main navigation appears on every page -->
      <nav aria-label="Main">
        <ul class="menu">
          <li><a href="index.html">Home</a></li>
          <li><a href="topic-evolution.html">Evolution of HTTP</a></li>
          <li><a href="topic-security.html">HTTPS &amp; Security</a></li>
          <li><a href="concepts.html">Key Concepts</a></li>
          <li><a href="references.html">References</a></li>
          <li><a href="about.html">About</a></li>
          <!-- Mark Quiz as active on this page -->
          <li><a class="active" href="quiz.html">Quiz</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Main content area holds the quiz -->
  <main class="container">
    <!-- Introduce the page purpose -->
    <h1>HTTP/HTTPS Self-Assessment Quiz</h1>
    <p class="lede">Test your knowledge of HTTP versions, HTTPS/TLS, and HTTP/3. Submit to see your score and detailed feedback on this page.</p>

    <!-- Use a form so the browser manages inputs naturally -->
    <form id="quiz" class="quiz-card" novalidate>
      <!-- Q1: Fill-in-the-blank (required by rubric) -->
      <fieldset>
        <legend>Q1 · Fill in the blank (20 pts)</legend>
        <div class="q">
          <label for="q1">HTTP/3 is built on the transport protocol called <em>_____</em>.</label>
          <input id="q1" name="q1" type="text" placeholder="Type the protocol name" autocomplete="off">
          <div class="hint">Hint: It replaces TCP for HTTP/3.</div>
        </div>
      </fieldset>

      <!-- Q2: Single-choice (1 of 3 required) -->
      <fieldset>
        <legend>Q2 · Single choice (20 pts)</legend>
        <div class="q">
          <span>Which HTTP version introduced <strong>persistent connections</strong>?</span>
          <div class="options">
            <label><input type="radio" name="q2" value="0.9"> HTTP/0.9</label>
            <label><input type="radio" name="q2" value="1.0"> HTTP/1.0</label>
            <label><input type="radio" name="q2" value="1.1"> HTTP/1.1</label>
            <label><input type="radio" name="q2" value="2"> HTTP/2</label>
          </div>
        </div>
      </fieldset>

      <!-- Q3: Single-choice (2 of 3 required) -->
      <fieldset>
        <legend>Q3 · Single choice (20 pts)</legend>
        <div class="q">
          <span>Which technology eliminates TCP head-of-line blocking for HTTP?</span>
          <div class="options">
            <label><input type="radio" name="q3" value="tls"> TLS 1.3</label>
            <label><input type="radio" name="q3" value="h2"> HTTP/2</label>
            <label><input type="radio" name="q3" value="quic"> QUIC</label>
            <label><input type="radio" name="q3" value="cdn"> CDNs</label>
          </div>
        </div>
      </fieldset>

      <!-- Q4: Single-choice (3 of 3 required) -->
      <fieldset>
        <legend>Q4 · Single choice (20 pts)</legend>
        <div class="q">
          <span>Which version added <strong>multiplexing</strong> and <strong>header compression</strong>?</span>
          <div class="options">
            <label><input type="radio" name="q4" value="1.1"> HTTP/1.1</label>
            <label><input type="radio" name="q4" value="2"> HTTP/2</label>
            <label><input type="radio" name="q4" value="3"> HTTP/3</label>
            <label><input type="radio" name="q4" value="spdy"> SPDY</label>
          </div>
        </div>
      </fieldset>

      <!-- Q5: Multi-select (required by rubric: more than one correct) -->
      <fieldset>
        <legend>Q5 · Multi-select (20 pts)</legend>
        <div class="q">
          <span>Which are core security properties provided by HTTPS/TLS? <em>(Select all that apply.)</em></span>
          <div class="options">
            <label><input type="checkbox" name="q5" value="conf"> Confidentiality</label>
            <label><input type="checkbox" name="q5" value="integ"> Integrity</label>
            <label><input type="checkbox" name="q5" value="auth"> Authentication</label>
            <label><input type="checkbox" name="q5" value="img"> Image compression</label>
          </div>
        </div>
      </fieldset>

      <!-- Submit and Reset controls -->
      <div class="actions">
        <button type="submit" class="primary">Submit Quiz</button>
        <button type="button" id="resetBtn" class="secondary">Retake / Reset</button>
      </div>

      <!-- Results render here after submit; keep on the same page -->
      <section id="results" aria-live="polite"></section>
    </form>
  </main>

  <!-- Omit the footer if your instructor does not want it -->
  <!-- <footer class="site-footer"><div class="container small"><p>This website is a class project for IT 3203.</p></div></footer> -->

  <!-- Add simple, readable JavaScript for grading and feedback -->
  <script>
    // Run once when the page loads
    (function(){
      // Grab the form and the results area
      const form = document.getElementById('quiz');
      const results = document.getElementById('results');
      const resetBtn = document.getElementById('resetBtn');

      // Define the correct answers
      const key = {
        q1: (v) => (v || '').trim().toLowerCase() === 'quic',  // fill-in
        q2: '1.1',                                             // radios
        q3: 'quic',
        q4: '2',
        q5: new Set(['conf','integ','auth'])                   // checkboxes
      };

      // Assign point values to each question
      const pts = { q1:20, q2:20, q3:20, q4:20, q5:20 };

      // Check a multi-select by exact match
      function gradeMulti(selected, correctSet){
        if(selected.length === 0) return false;
        const s = new Set(selected);
        if(s.size !== correctSet.size) return false;
        for(const v of s){ if(!correctSet.has(v)) return false; }
        return true;
      }

      // Handle form submission: score answers and show feedback
      form.addEventListener('submit', function(e){
        e.preventDefault();

        // Read all answer values
        const a1 = document.getElementById('q1').value;
        const a2 = (form.querySelector('input[name="q2"]:checked') || {}).value || '';
        const a3 = (form.querySelector('input[name="q3"]:checked') || {}).value || '';
        const a4 = (form.querySelector('input[name="q4"]:checked') || {}).value || '';
        const a5 = Array.from(form.querySelectorAll('input[name="q5"]:checked')).map(el => el.value);

        // Score each question
        let total = 0;
        const details = [];

        const c1 = key.q1(a1); if(c1) total += pts.q1;
        details.push({ q:'Q1', ok:c1, your:a1 || '(blank)', ans:'QUIC', note:'HTTP/3 runs over QUIC (UDP).' });

        const c2 = (a2 === key.q2); if(c2) total += pts.q2;
        details.push({ q:'Q2', ok:c2, your:a2 ? 'HTTP/'+a2 : '(blank)', ans:'HTTP/1.1', note:'HTTP/1.1 introduced persistent connections.' });

        const c3 = (a3 === key.q3); if(c3) total += pts.q3;
        details.push({ q:'Q3', ok:c3, your:a3 || '(blank)', ans:'QUIC', note:'QUIC removes TCP head-of-line blocking.' });

        const c4 = (a4 === key.q4); if(c4) total += pts.q4;
        details.push({ q:'Q4', ok:c4, your:a4 ? (a4==='2'?'HTTP/2':a4==='3'?'HTTP/3':'HTTP/'+a4) : '(blank)', ans:'HTTP/2', note:'HTTP/2 adds multiplexing and header compression.' });

        const c5 = gradeMulti(a5, key.q5); if(c5) total += pts.q5;
        details.push({ q:'Q5', ok:c5, your:a5.length ? a5.join(', ') : '(none)', ans:'Confidentiality, Integrity, Authentication', note:'HTTPS/TLS provides these security properties.' });

        // Decide pass or fail at 70 points
        const passed = total >= 70;

        // Show the score and detailed feedback
        results.style.display = 'block';
        results.innerHTML = `
          <div class="scoreline ${passed ? 'pass':'fail'}">${passed ? 'PASS' : 'FAIL'} — Score: ${total}/100</div>
          ${details.map(d => `
            <div class="perq">
              <div><strong>${d.q}</strong> — <span class="${d.ok ? 'ok':'bad'}">${d.ok ? 'Correct' : 'Incorrect'}</span></div>
              <div>Your answer: ${d.your}</div>
              ${d.ok ? '' : `<div>Correct answer: <strong>${d.ans}</strong></div>`}
              <div class="hint">${d.note}</div>
            </div>
          `).join('')}
        `;

        // Move the viewport to the results
        results.scrollIntoView({ behavior:'smooth', block:'start' });
      });

      // Clear inputs and feedback for a fresh attempt
      resetBtn.addEventListener('click', function(){
        form.reset();
        results.style.display = 'none';
        results.innerHTML = '';
      });
    })();
  </script>
</body>
</html>
